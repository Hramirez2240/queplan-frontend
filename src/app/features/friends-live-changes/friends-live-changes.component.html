<mat-card class="mx-4 my-4">
  <mat-card-title>Cambios en tiempo real</mat-card-title>
  <mat-card-subtitle>
    Mostrando tabla, columna modificada, valor anterior y nuevo.
  </mat-card-subtitle>

  <mat-card-content>
    <table mat-table [dataSource]="data" class="mat-elevation-z2 fullwidth">

      <ng-container matColumnDef="table">
        <th mat-header-cell *matHeaderCellDef> Tabla </th>
        <td mat-cell *matCellDef="let r">
          <mat-chip-set>
            <mat-chip color="primary" selected>{{ r.table }}</mat-chip>
          </mat-chip-set>
        </td>
      </ng-container>

      <ng-container matColumnDef="column">
        <th mat-header-cell *matHeaderCellDef> Columna </th>
        <td mat-cell *matCellDef="let r">{{ r.column }}</td>
      </ng-container>

      <ng-container matColumnDef="old">
        <th mat-header-cell *matHeaderCellDef> Valor anterior </th>
        <td mat-cell *matCellDef="let r">{{ r.oldValue }}</td>
      </ng-container>

      <ng-container matColumnDef="new">
        <th mat-header-cell *matHeaderCellDef> Valor nuevo </th>
        <td mat-cell *matCellDef="let r"><b>{{ r.newValue }}</b></td>
      </ng-container>

      <ng-container matColumnDef="when">
        <th mat-header-cell *matHeaderCellDef> Fecha/Hora </th>
        <td mat-cell *matCellDef="let r">
          {{ r.changedAt ? (r.changedAt | date:'short') : 'â€”' }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row        *matRowDef="let r; columns: displayedColumns;"></tr>
    </table>
  </mat-card-content>
</mat-card>
